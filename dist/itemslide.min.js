function matrixToArray(e){return e.substr(7,e.length-8).split(", ")}function easeOutBack(e,t,i,n,a){return void 0==a&&(a=1.70158),i*((e=e/n-1)*e*((a+1)*e+a)+1)+t}function slideout(e,t){function i(){if(v=Date.now()-r,h)$(".itemslide_slideoutwrap").translate3d(0,s-easeOutBack(v,0,s-d,250,0)),e.savedSlide.css("opacity",c-easeOutBack(v,0,c-0,250,0)*(u?-1:1));else{if(u)return $(".itemslide_slideoutwrap").children().unwrap(),$(".itemslide_move").children().unwrap(),e.end_animation=!0,void(v=0);$(".itemslide_move").translate3d(0-easeOutBack(v-250,0,0+e.savedSlide.width(),125,0)*(m?-1:1))}return 1==g&&($(".itemslide_slideoutwrap").children().unwrap(),e.savedSlideIndex==e.data("vars").currentIndex&&$(".itemslide_move").children(":nth-child(1)").attr("id","active"),e.savedSlideIndex!=e.children().length-1||m||(t.duration=200,e.gotoSlide(e.children().length-2)),0==e.savedSlideIndex&&0!=e.data("vars").currentIndex&&(v=500),g=-1),v>=250&&(h=!1,-1!=g&&(g=1),v>=375)?($(".itemslide_move").children().unwrap(),e.removeSlide(n.index()),(0==e.savedSlideIndex&&0!=e.data("vars").currentIndex||m)&&e.gotoWithoutAnimation(e.data("vars").currentIndex-1),t.duration=l,v=0,void(e.end_animation=!0)):void(o=requestAnimationFrame(i))}isExplorer&&e.children().height(e.data("vars").slideHeight);var n,a,d=-400,r=Date.now(),s=0,o=0,l=0,c=0;e.end_animation=!0;var u=!1;e.swipeOut=function(){s=$(".itemslide_slideoutwrap").translate3d().y,a=0>s,d=a?-400:400,Math.abs(0-s)<50?(u=!0,d=0):(u=!1,e.trigger("swipeout")),g=0,l=t.duration,n=e.savedSlide,r=Date.now(),c=e.savedSlide.css("opacity"),e.savedSlideIndex<e.data("vars").currentIndex?(m=!0,e.children(":lt("+e.savedSlideIndex+")").wrapAll("<div class='itemslide_move' />")):(m=!1,e.children(":gt("+e.savedSlideIndex+")").wrapAll("<div class='itemslide_move' />")),isExplorer&&$(".itemslide_move").height(this.height()),h=!0,e.end_animation=!1,o=requestAnimationFrame(i)};var h=!0,v=0,g=0,m=!1}var isExplorer=!1||!!document.documentMode;!function(e){"use strict";e.fn.initslide=function(e){console.log("Please do not use .initslide() as its deprecated - use .itemslide() instead"),this.itemslide(e)},e.fn.itemslide=function(t){function i(t){"touchmove"==t.type?(_=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],Math.abs(_.pageX-I)>10&&(b=1),b&&t.preventDefault()):(_=t,t.preventDefault()),h=-(_.pageX-I)>0?1:-1,r()?D&&(M=_.pageX,D=0):(D||(w.currentLandPos=w.translate3d().x,I=_.pageX),D=1),1==E&&(w.savedSlide.wrapAll("<div class='itemslide_slideoutwrap' />"),E=-1),Math.abs(_.pageX-I)>6&&(!m&&w.end_animation&&(p=!0),cancelAnimationFrame(u)),Math.abs(_.pageY-y)>6&&!p&&w.end_animation&&(m=!0),p?(m=!1,w.translate3d((0==D?M-I+(_.pageX-M)/4:_.pageX-I)+w.currentLandPos),w.trigger("changePos"),w.trigger("pan")):m&&x.swipe_out&&(t.preventDefault(),e(".itemslide_slideoutwrap").translate3d(0,_.pageY-y),-1!=E&&(E=1))}function n(e){w.children(":nth-child("+(w.data("vars").currentIndex+1)+")").attr("id",""),w.children(":nth-child("+(e+1)+")").attr("id","active"),e!=x.currentIndex&&(w.data("vars").currentIndex=e,w.trigger("changeActiveIndex"))}function a(e){for(var t=0;t<w.children("li").length;t++)if(w.children(t).width()*t+w.children(t).width()/2-w.children(t).width()*x.pan_threshold*h-d(0)>e)return x.one_item?t!=w.data("vars").currentIndex?w.data("vars").currentIndex+1*h:w.data("vars").currentIndex:t;return x.one_item?w.data("vars").currentIndex+1:w.children("li").length-1}function d(e){return-(e*w.children("li").width()-(w.parent().width()-l-w.children("li").width())/2)}function r(){return Math.floor(w.translate3d().x)>d(0)&&-1==h||Math.ceil(w.translate3d().x)<d(w.children("li").length-1)&&1==h}function s(t){t>=w.children("li").length-1||0>=t?(v=!0,t=Math.min(Math.max(t,0),w.children("li").length-1)):v=!1,n(t),k=Math.max(x.duration-1920/e(window).width()*Math.abs(w.data("vars").velocity)*9*(x.duration/230)-(r()?g/15:0)*(x.duration/230),50),P=v?250*Math.abs(w.data("vars").velocity)/e(window).width():0,c=w.translate3d().x,w.currentLandPos=d(t),cancelAnimationFrame(u),$=Date.now(),u=requestAnimationFrame(o)}function o(){var e=Date.now()-$;return w.trigger("changePos"),w.translate3d(c-easeOutBack(e,0,c-w.currentLandPos,k,P)),e>=k?void w.translate3d(w.currentLandPos):void(u=requestAnimationFrame(o))}var l=0,c=0,u=0,h=0,v=!1,g=0,m=!1,p=!1,w=e(this),f={duration:350,swipe_sensitivity:150,disable_slide:!1,disable_scroll:!1,start:0,one_item:!1,pan_threshold:.3,disable_autowidth:!1,swipe_out:!1},x=e.extend({},f,t);this.data("vars",{currentIndex:0,disable_autowidth:x.disable_autowidth,velocity:0,slideHeight:w.children().height()}),w.end_animation=!0,x.swipe_out&&slideout(w,x),l=parseInt(w.css("left").replace("px","")),w.css({"touch-action":"pan-y","-webkit-user-select":"none","-webkit-touch-callout":"none","-webkit-user-drag":"none","-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)"}),x.disable_autowidth||w.css("width",w.children("li").length*w.children("li").width()+10),w.translate3d(0),s(x.start);var _,S=!1,I=0,y=0,b=!1,A=0;w.savedSlideIndex=0,w.on("mousedown touchstart","li",function(t){if(!x.disable_slide){if(_="touchstart"==t.type?t.originalEvent.touches[0]||t.originalEvent.changedTouches[0]:t,!w.end_animation)return;A=Date.now(),S=1,b=0,I=_.pageX,y=_.pageY,m=!1,p=!1,w.savedSlide=e(this),w.savedSlideIndex=w.savedSlide.index(),E=0,e(window).on("mousemove touchmove",i),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}});var D=!0,M=0,E=0;e(window).on("mouseup touchend",function(t){if(!x.disable_slide&&S)if(_="touchend"==t.type?t.originalEvent.touches[0]||t.originalEvent.changedTouches[0]:t,S=!1,e(window).off("mousemove touchmove"),m&&x.swipe_out)w.swipeOut();else if(w.end_animation){var i=Date.now()-A;w.data("vars").velocity=-(_.pageX-I)/i,h=w.data("vars").velocity>0?1:-1,g=(_.pageX-I)*h*-1,(_.pageX-I)*h<-6?s(a(w.data("vars").velocity*x.swipe_sensitivity-w.translate3d().x)):w.savedSlide.index()!=w.data("vars").currentIndex&&(t.preventDefault(),s(w.savedSlide.index()))}});try{w.mousewheel(function(e){if(!x.disable_scroll){w.data("vars").velocity=0;var t=w.data("vars").currentIndex-e.deltaY;if(t>=w.children("li").length||0>t)return;s(t),e.preventDefault()}})}catch(X){}w.on("gotoSlide",function(e,t){s(t)});var P=0,k=x.duration,$=Date.now();w.gotoWithoutAnimation=function(e){w.data("vars").currentIndex=e,w.currentLandPos=d(e),w.translate3d(d(e))}},e.fn.gotoSlide=function(e){this.trigger("gotoSlide",e)},e.fn.next=function(){this.gotoSlide(this.data("vars").currentIndex+1)},e.fn.previous=function(){this.gotoSlide(this.data("vars").currentIndex-1)},e.fn.reload=function(){this.data("vars").disable_autowidth||this.css("width",this.children("li").length*this.children("li").width()+10),this.data("vars").slideHeight=this.children().height(),this.data("vars").velocity=0,this.gotoSlide(this.data("vars").currentIndex)},e.fn.addSlide=function(e){this.append("<li>"+e+"</li>"),this.reload()},e.fn.removeSlide=function(e){this.children(":nth-child("+(e+1)+")").remove()},e.fn.getActiveIndex=function(){return this.data("vars").currentIndex},e.fn.getCurrentPos=function(){return this.translate3d().x},e.fn.translate3d=function(e,t){if(null==e){var i=matrixToArray(this.css("transform"));return{x:parseFloat(isExplorer?i[12]:i[4]),y:parseFloat(isExplorer?i[13]:i[5])}}this.css("transform","translate3d("+e+"px,"+(t||0)+"px, 0px)")}}(jQuery);
